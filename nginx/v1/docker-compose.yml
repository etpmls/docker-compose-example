version: '3.9'

services:
  nginx:
    container_name: nginx
    image: nginx:1
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    networks:
      - app
    volumes:
      # Main Configuration Directory
      # 主配置目录
      - /www/serv/nginx/etc/nginx/nginx.conf:/etc/nginx/nginx.conf
      # nginxconfig.io Configuration Directory
      # nginxconfig.io配置目录 
      - /www/serv/nginx/etc/nginx/nginxconfig.io/:/etc/nginx/nginxconfig.io/
      # Site Directory 
      # 站点目录
      - /www/serv/nginx/etc/nginx/sites-enabled/:/etc/nginx/sites-enabled/ 
      # dhparam.pem Generated by nginxconfig.io Configuration
      # nginxconfig.io配置生成的dhparam.pem
      - /www/serv/nginx/etc/nginx/dhparam.pem:/etc/nginx/dhparam.pem
      # Let's Encrypt certificate directory configured by nginxconfig.io
      # nginxconfig.io配置的Lets Encrypt证书目录
      - /www/serv/nginx/etc/letsencrypt/live/:/etc/letsencrypt/live/
      # The certificate directory generated by certbot is referenced, so we mount the original directory
      # certbot生成的证书目录是引用的，所以我们挂载该原始目录
      - /www/serv/nginx/etc/letsencrypt/archive/:/etc/letsencrypt/archive/
      # Let's Encrypt web root directory configured by nginxconfig.io
      # nginxconfig.io配置的Lets Encrypt Web根目录
      - /www/serv/nginx/var/www/_letsencrypt/:/var/www/_letsencrypt/
      # Log directory
      # 日志目录
      - /www/serv/nginx/var/log/nginx/:/var/log/nginx/ 
      # Website application directory
      # 网站应用目录
      - /www/app/:/www/app/
networks:
  app:
    external: true
    name: app